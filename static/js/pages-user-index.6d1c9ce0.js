(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-index"],{"095e":function(e,t,o){"use strict";o("d3b7"),o("3ca3"),o("10d1"),o("ddb0"),o("e439");var a=o("4ea4"),n=o("7037");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o("ac1f"),o("5319"),o("96cf");var i=a(o("1da1")),s=a(o("ade3")),l=a(o("72d2")),c=(d(o("2371")),a(o("19f9")));function r(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=i?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(a,s,l):a[s]=e[s]}return a.default=e,o&&o.set(e,a),a}var f={components:{Picker:l.default,txl:c.default},data:function(){var e;return e={category:[],level:[],schoolname:[],disabled:!1,disableds:!1,scrollTop:"",current:""},(0,s.default)(e,"scrollTop",0),(0,s.default)(e,"indexList",["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),(0,s.default)(e,"form",{school:"",schoolname:"",category:"",categoryName:"",level:"",levelName:"",userName:"",phone:""}),(0,s.default)(e,"show",!1),(0,s.default)(e,"banner",""),(0,s.default)(e,"schoolisshow",!0),(0,s.default)(e,"swiperItem",[{title:""},{title:""}]),(0,s.default)(e,"tztitle",""),(0,s.default)(e,"schoolCode",""),(0,s.default)(e,"tgzt",""),(0,s.default)(e,"current",""),(0,s.default)(e,"code",""),(0,s.default)(e,"sfzcurrent",""),(0,s.default)(e,"sfzcode",""),(0,s.default)(e,"isAllowModify",""),e},created:function(){this.GetSteps()},onLoad:function(e){if(void 0!=e.tgzt&&(this.tgzt=e.tgzt),void 0!=e.current&&(this.current=e.current),void 0!=e.code&&(this.code=e.code),void 0!=e.schoolCode&&(console.log("onLoad:",e.schoolCode),this.schoolCode=e.schoolCode),void 0!=e.token&&""!=e.token&&uni.setStorageSync("token",e.token),void 0!=e.schoolCode&&""!=e.schoolCode){uni.setStorageSync("schoolCode",e.schoolCode);var t=uni.getStorageSync("schoolCode");this.schoolinfo(t)}this.isAllowModify=e.isAllowModify,console.log(this.isAllowModify),this.grinfo()},methods:{GetSteps:function(){},tzcontent:function(e,t){uni.showModal({title:e,content:t,onfirmText:"确认",showCancel:!1,success:function(e){e.confirm?console.log("用户点击确定"):e.cancel&&console.log("用户点击取消")}})},evFunc:function(e){this.form.school=e.code,this.form.schoolname=e.name,this.show=!1,this.form.category="",this.form.categoryName="",this.form.level="",this.form.levelName="",null!=e.code&&(this.getcategory(!1),this.getlevel(!1))},grinfo:function(){var e=this;uni.request({url:"".concat(getApp().globalData.url,"/api/getUserInfo"),method:"POST",header:{"x-access-token":uni.getStorageSync("token")},success:function(t){if(void 0!=e.schoolCode&&""!=e.schoolCode||(e.schoolCode=t.data.data.schoolCode,console.log(e.schoolCode),e.schoolinfo(e.schoolCode),uni.setStorageSync("schoolCode",e.schoolCode)),void 0==t.data.data||void 0==t.data.data.school||""==t.data.data.school){var o=uni.getStorageSync("schoolCode");void 0!=o&&""!=o&&e.getSchoolInit(o)}void 0!=t.data.data&&void 0!=t.data.data.school&&(e.form.school=t.data.data.schoolCode,e.form.schoolname=t.data.data.school,e.form.category=t.data.data.category,e.form.categoryName=t.data.data.categoryName,e.form.level=t.data.data.level,e.form.levelName=t.data.data.levelName,e.form.phone=t.data.data.cardNum,e.form.userName=t.data.data.xm)},fail:function(e){}})},schoolinfo:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,uni.request({url:"".concat(getApp().globalData.url,"/api/getschoolInfo"),method:"POST",header:{"x-access-token":uni.getStorageSync("token"),"content-type":"application/x-www-form-urlencoded"},data:{schoolCode:e},success:function(e){if(console.log(e.data),e.data.banner?(t.banner=getApp().globalData.url+e.data.banner,console.log(t.banner)):t.banner="../../static/user_top.png",e.data.schoolName&&(t.schoolisshow=!1),void 0!=e.data.notice&&1==e.data.notice.length){var o=e.data.notice[0].title,a=e.data.notice[0].context;console.log(o);for(var n=0;n<t.swiperItem.length;n++)t.swiperItem[n].title=o,t.swiperItem[n].context=a}else t.swiperItem=e.data.notice;console.log(t.swiperItem)}});case 2:case"end":return o.stop()}}),o)})))()},getSchool:function(){var e=this,t=uni.getStorageSync("token"),o="";""==this.form.school&&""!=this.form.schoolname&&(o=this.form.schoolname.replace(/\s+/g,"")),uni.request({url:"".concat(getApp().globalData.url,"/api/getSchool"),method:"POST",header:{"x-access-token":t,"content-type":"application/x-www-form-urlencoded"},data:{schoolName:o,schoolId:""},success:function(t){console.log(t.data.data),e.schoolname=t.data.data},fail:function(e){}})},getSchoolInit:function(e){var t=this,o=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/getSchool"),method:"POST",header:{"x-access-token":o,"content-type":"application/x-www-form-urlencoded"},data:{schoolName:"",schoolId:""},success:function(o){for(var a=0;a<o.data.data.length;a++)if(o.data.data[a].code==e){t.form.school=o.data.data[a].code,t.form.schoolname=o.data.data[a].name;break}},fail:function(e){}})},getcategory:function(e){var t=this,o=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/sysDict"),method:"POST",header:{"x-access-token":o,"content-type":"application/x-www-form-urlencoded"},data:{type:"student_xslb",schoolCode:t.form.school},success:function(o){t.category=o.data.data,e?t.$refs.PickerCategory.show():t.category&&t.category.length>=1&&(t.form.category=t.category[0].code,t.form.categoryName=t.category[0].name)},fail:function(e){}})},getlevel:function(e){var t=this,o=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/sysDict"),method:"POST",header:{"x-access-token":o,"content-type":"application/x-www-form-urlencoded"},data:{type:"student_pycc",schoolCode:t.form.school},success:function(o){console.log(o.data.data),t.level=o.data.data,e?t.$refs.PickerLevel.show():t.level&&t.level.length>=1&&(t.form.level=t.level[0].code,t.form.levelName=t.level[0].name)},fail:function(e){}})},stop:function(){uni.navigateBack({delta:1})},School:function(){this.getSchool(),this.show=!0},onCategory:function(){void 0!=this.form.schoolname&&null!=this.form.schoolname&&""!=this.form.schoolname&&""!=this.form.school?this.getcategory(!0):uni.showToast({title:"请先选择学校",icon:"none"})},onLevel:function(){void 0!=this.form.schoolname&&null!=this.form.schoolname&&""!=this.form.schoolname&&""!=this.form.school?this.getlevel(!0):uni.showToast({title:"请先选择学校",icon:"none"})},GetSchool:function(e,t,o){this.form.school=t,this.form.schoolname=e},categoryConfirm:function(e,t,o){this.form.category=t,this.form.categoryName=e},levelConfirm:function(e,t,o){this.form.level=t,this.form.levelName=e},onSave:function(){var e=this;if(2!=this.tgzt&&1!=this.current&&2!=this.current)if(console.log(this.form.schoolname),void 0!=this.form.schoolname&&null!=this.form.schoolname&&""!=this.form.schoolname)if(void 0!=this.form.categoryName&&null!=this.form.categoryName&&""!=this.form.categoryName)if(void 0!=this.form.levelName&&null!=this.form.levelName&&""!=this.form.levelName)if(void 0!=this.form.userName&&null!=this.form.userName&&""!=this.form.userName)if(void 0!=this.form.phone&&null!=this.form.phone&&""!=this.form.phone){this.form.phone;var t=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/stepSubmit"),method:"POST",header:{"x-access-token":t,"content-type":"application/x-www-form-urlencoded"},data:{code:"0",IDcardNo:this.form.phone,category:this.form.category,level:this.form.level,schoolCode:this.form.school,school:this.form.schoolname,userName:this.form.userName,categoryName:this.form.categoryName,levelName:this.form.levelName,phone:this.form.phone},success:function(t){if(console.log(t.data),"200"==t.data.code){var o=e;uni.showModal({title:"提示",content:t.data.msg,success:function(e){e.confirm?(setTimeout((function(){uni.navigateTo({url:"/pages/user/card?sfzcurrent="+o.sfzcurrent+"&sfzcode="+o.sfzcode})}),1e3),console.log(1)):e.cancel&&console.log("用户点击取消")}})}else uni.showToast({title:""+t.data.msg,duration:2e3,icon:"none"})},fail:function(e){uni.showToast({title:"验证异常",duration:2e3,icon:"none"})}})}else uni.showToast({title:"身份证不能为空",icon:"none"});else uni.showToast({title:"姓名不能为空",icon:"none"});else uni.showToast({title:"层次不能为空",icon:"none"});else uni.showToast({title:"类别不能为空",icon:"none"});else uni.showToast({title:"学校不能为空",icon:"none"});else uni.showModal({title:"提示",content:"正在核验，不能修改信息",confirmText:"确认",showCancel:!1,success:function(e){e.confirm?console.log("用户点击确定"):e.cancel&&console.log("用户点击取消")}})},getuserInfo:function(){var e=this,t=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/saveUserDes"),method:"POST",header:{"x-access-token":t,"content-type":"application/x-www-form-urlencoded"},data:{IDcardNo:this.form.phone,category:this.form.category,level:this.form.level,schoolCode:this.form.school,school:this.form.schoolname,userName:this.form.userName,categoryName:this.form.categoryName,levelName:this.form.levelName,phone:this.form.phone},success:function(t){console.log(t.data);var o=t.data.code;200==o?setTimeout((function(){uni.navigateTo({url:"/pages/user/card?sfzcurrent="+e.sfzcurrent+"&sfzcode="+e.sfzcode})}),1e3):uni.showToast({title:"操作不成功："+t.data.msg,duration:2e3,icon:"none"})},fail:function(e){}})}}};t.default=f},"0d59":function(e,t,o){"use strict";o.r(t);var a=o("095e"),n=o.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){o.d(t,e,(function(){return a[e]}))}(i);t["default"]=n.a},"1b01":function(e,t,o){var a=o("8507");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=o("4f06").default;n("625fc23a",a,!0,{sourceMap:!1,shadowMode:!1})},"1de2":function(e,t,o){"use strict";o.r(t);var a=o("9622"),n=o("0d59");for(var i in n)["default"].indexOf(i)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(i);o("382c");var s,l=o("f0c5"),c=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"075f2e76",null,!1,a["a"],s);t["default"]=c.exports},"382c":function(e,t,o){"use strict";var a=o("1b01"),n=o.n(a);n.a},8507:function(e,t,o){var a=o("24fb");t=a(!1),t.push([e.i,".swiper[data-v-075f2e76]{display:-webkit-box;display:-webkit-flex;display:flex;color:#2979ff}.bjt[data-v-075f2e76]{width:%?750?%;height:%?256?%;margin-bottom:%?30?%}.bjt uni-image[data-v-075f2e76]{width:100%;height:100%}.content[data-v-075f2e76]{width:%?750?%;padding-top:%?0?%;margin:0 auto}.content .form-item[data-v-075f2e76]{width:%?686?%;height:%?90?%;box-sizing:border-box;border-bottom:1px solid rgba(0,0,0,.1);height:%?140?%;padding:%?25?%;margin:auto}.content .form-item .title[data-v-075f2e76]{display:-webkit-box;display:-webkit-flex;display:flex;color:#333;font-size:%?28?%;margin-bottom:%?16?%}.content .form-item .title .tips[data-v-075f2e76]{color:red;margin-left:%?6?%}.content .form-item .input[data-v-075f2e76]{height:%?50?%;font-size:%?32?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .form-item .select[data-v-075f2e76]{color:#2979ff}.content .form-item .placeholder-input[data-v-075f2e76]{color:rgba(51,51,51,.25)}.content .btn[data-v-075f2e76]{padding:%?8?% 0;width:%?686?%;height:%?96?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#2979ff;color:#fff;font-size:%?32?%;border-radius:%?16?%;margin:%?40?% auto}.content .btns[data-v-075f2e76]{padding:%?8?% 0;width:%?686?%;height:%?96?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff;color:#2979ff;font-size:%?32?%;border-radius:%?16?%;border:1px solid #ccc;margin:%?40?% auto}",""]),e.exports=t},9622:function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return a}));var a={uPopup:o("df25").default},n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",{staticClass:"content"},[o("v-uni-view",{staticClass:"bjt"},[o("v-uni-image",{attrs:{src:e.banner,mode:""}})],1),e.schoolisshow?e._e():o("v-uni-view",{staticClass:"swiper"},[o("v-uni-view",{staticStyle:{"margin-left":"20rpx",width:"100%",height:"50rpx",overflow:"hidden"}},[o("v-uni-swiper",{attrs:{circular:!0,vertical:!1,autoplay:!0,interval:4e3,duration:6e3}},e._l(e.swiperItem,(function(t,a){return o("v-uni-swiper-item",{key:a,staticStyle:{height:"1rpx"},on:{click:function(o){arguments[0]=o=e.$handleEvent(o),e.tzcontent(t.title,t.context)}}},[o("v-uni-view",{staticClass:"swiper_item"},[e._v(e._s(t.context))])],1)})),1)],1)],1),o("v-uni-view",{staticClass:"article"},[e.schoolisshow?o("v-uni-view",{staticClass:"form-item"},[o("v-uni-view",{staticClass:"title flex"},[e._v("学校"),o("v-uni-view",{staticClass:"tips"},[e._v("*")])],1),o("v-uni-view",{staticClass:"input flex space-between"},[o("v-uni-input",{attrs:{placeholder:"请输入学校","placeholder-class":"placeholder-input",disabled:!0},model:{value:e.form.schoolname,callback:function(t){e.$set(e.form,"schoolname",t)},expression:"form.schoolname"}}),2!=e.current?o("v-uni-view",{staticClass:"select",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.School.apply(void 0,arguments)}}},[e._v("选择")]):e._e()],1)],1):e._e(),o("v-uni-view",{staticClass:"form-item"},[o("v-uni-view",{staticClass:"title flex"},[e._v("类别"),o("v-uni-view",{staticClass:"tips"},[e._v("*")])],1),o("v-uni-view",{staticClass:"input flex space-between"},[o("v-uni-input",{staticClass:"width",attrs:{placeholder:"请选择学生类别",disabled:!0,"placeholder-class":"placeholder-input"},model:{value:e.form.categoryName,callback:function(t){e.$set(e.form,"categoryName",t)},expression:"form.categoryName"}}),2!=e.current?o("v-uni-view",{staticClass:"select",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onCategory.apply(void 0,arguments)}}},[e._v("选择")]):e._e()],1)],1),o("v-uni-view",{staticClass:"form-item"},[o("v-uni-view",{staticClass:"title flex"},[e._v("层次"),o("v-uni-view",{staticClass:"tips"},[e._v("*")])],1),o("v-uni-view",{staticClass:"input flex space-between"},[o("v-uni-input",{staticClass:"width",attrs:{placeholder:"请选择培养层次",disabled:!0,"placeholder-class":"placeholder-input"},model:{value:e.form.levelName,callback:function(t){e.$set(e.form,"levelName",t)},expression:"form.levelName"}}),2!=e.current?o("v-uni-view",{staticClass:"select",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onLevel.apply(void 0,arguments)}}},[e._v("选择")]):e._e()],1)],1),o("v-uni-view",{staticClass:"form-item"},[o("v-uni-view",{staticClass:"title flex"},[e._v("姓名"),o("v-uni-view",{staticClass:"tips"},[e._v("*")])],1),o("v-uni-view",{staticClass:"input flex space-between"},[o("v-uni-input",{staticStyle:{width:"600upx"},attrs:{placeholder:"请输入",disabled:e.disabled,"placeholder-class":"placeholder-input"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)],1),o("v-uni-view",{staticClass:"form-item"},[o("v-uni-view",{staticClass:"title flex"},[e._v("身份证号码"),o("v-uni-view",{staticClass:"tips"},[e._v("*")])],1),o("v-uni-view",{staticClass:"input flex space-between"},[o("v-uni-input",{staticStyle:{width:"600upx"},attrs:{placeholder:"请输入",maxlength:"18",disabled:e.disableds,"placeholder-class":"placeholder-input"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),0==e.isAllowModify?o("v-uni-view",{staticClass:"btns",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.stop.apply(void 0,arguments)}}},[e._v("返回首页")]):o("v-uni-view",{staticClass:"btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onSave.apply(void 0,arguments)}}},[e._v("下一步")]),o("Picker",{ref:"PickerCategory",attrs:{range:e.category,"range-key":"name","name-key":"name","id-key":"code"},on:{onConfirm:function(t){arguments[0]=t=e.$handleEvent(t),e.categoryConfirm.apply(void 0,arguments)}}}),o("Picker",{ref:"PickerLevel",attrs:{range:e.level,"range-key":"name","name-key":"name","id-key":"code"},on:{onConfirm:function(t){arguments[0]=t=e.$handleEvent(t),e.levelConfirm.apply(void 0,arguments)}}}),o("Picker",{ref:"university",attrs:{range:e.schoolname,"range-key":"name","name-key":"name","id-key":"code"},on:{onConfirm:function(t){arguments[0]=t=e.$handleEvent(t),e.GetSchool.apply(void 0,arguments)}}}),o("u-popup",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[o("txl",{attrs:{datas:e.schoolname,index:!0,name:"name"},on:{ev:function(t){arguments[0]=t=e.$handleEvent(t),e.evFunc.apply(void 0,arguments)}}})],1)],1)},i=[]}}]);