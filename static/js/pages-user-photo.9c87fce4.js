(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-photo"],{2712:function(t,e,i){"use strict";i("d3b7"),i("3ca3"),i("10d1"),i("ddb0"),i("e439");var o=i("4ea4"),n=i("7037");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;c(i("2371"));var a=o(i("18a0"));function r(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(r=function(t){return t?i:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!==typeof t)return{default:t};var i=r(e);if(i&&i.has(t))return i.get(t);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if("default"!==c&&Object.prototype.hasOwnProperty.call(t,c)){var s=a?Object.getOwnPropertyDescriptor(t,c):null;s&&(s.get||s.set)?Object.defineProperty(o,c,s):o[c]=t[c]}return o.default=t,i&&i.set(t,o),o}var s={data:function(){return{list:["../../static/bg_ns.png","../../static/ns.png"],photo:"",state:"",current:"",color:"rgb(255, 0, 0)",colors:"rgb(1, 167, 251)",color1:"rgb(255,255,255)",xzys:"rgb(255,255,255)",isshow:!1,tgzt:"",isOpenPassportPhoto:"",rxcurrentzt:"",rxcode:"",isAllowModify:"",windowWidth:"",cameraHeight:""}},onLoad:function(t){console.log(t),this.tgzt=t.tgzt,this.rxcurrentzt=t.rxcurrent,this.rxcode=t.rxcode},created:function(){console.log(this.xzys,this.color1),""!=uni.getStorageSync("color")&&(this.xzys=uni.getStorageSync("color"))},mounted:function(){},onShow:function(){this.GetSteps()},methods:{GetSteps:function(){var t=this,e=this,i=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/getSteps"),method:"POST",header:{"x-access-token":i},success:function(i){for(var o=0;o<i.data.data.length;o++)1==i.data.data[o].code||(2==i.data.data[o].code?(t.rxcurrentzt=i.data.data[o].current,t.rxcurrent=i.data.data[o].current,t.rxcode=i.data.data[o].code,t.isAllowModify=i.data.data[o].isAllowModify,console.log(t.isAllowModify)):4==i.data.data[o].code&&(t.tgzt=i.data.data[o].current));e.getphoto(),e.schoolinfo()},fail:function(t){}})},schoolinfo:function(){var t=this,e=uni.getStorageSync("schoolCode");uni.request({url:"".concat(getApp().globalData.url,"/api/getschoolInfo"),method:"POST",header:{"x-access-token":uni.getStorageSync("token"),"content-type":"application/x-www-form-urlencoded"},data:{schoolCode:e},success:function(e){console.log(e),t.isOpenPassportPhoto=e.data.isOpenPassportPhoto}})},ckyt:function(){var t=this,e=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/getUserPicture"),method:"POST",header:{"x-access-token":e},success:function(e){if(console.log(e),uni.hideToast(),void 0!=e.data.originalzpURL&&""!=e.data.originalzpURL){var i=(new Date).getTime();t.photo=getApp().globalData.url+e.data.originalzpURL+"&timestamp="+i}console.log(e.data.originalzpURL)},fail:function(t){uni.hideToast()}})},BackgroundColor:function(t){var e=this;uni.showLoading({title:"背景更换中",mask:!0,duration:5e3}),this.xzys=t,uni.setStorageSync("color",this.xzys);var i=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/changePhotoBg"),method:"POST",header:{"x-access-token":i,"content-type":"application/x-www-form-urlencoded"},data:{color:this.xzys},success:function(t){e.getphoto()},fail:function(t){uni.hideLoading()}})},bz:function(){uni.navigateTo({url:"/pages/user/RxPzhelp"})},getphoto:function(){var t=this,e=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/getUserPicture"),method:"POST",header:{"x-access-token":e},success:function(e){if(console.log(e),void 0!=e.data.URL&&""!=e.data.URL){uni.showLoading({title:"加载中"});var i=(new Date).getTime();t.photo=getApp().globalData.url+e.data.URL+"&timestamp="+i}setTimeout((function(){uni.hideLoading()}),2e3),console.log(t.photo)},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3)}})},stop:function(){uni.navigateBack({delta:1})},xcImg:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){uni.getFileSystemManager().readFile({filePath:e.tempFilePaths,encoding:"base64",success:function(e){var i=e.data;t.submitPhoto(i)},fail:function(t){console.log("图片转换失败")}})}})},submitPhoto:function(t){var e=this,i=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/saveRxPhoto"),header:{"x-access-token":i,"content-type":"application/x-www-form-urlencoded"},data:{photo:t},method:"POST",success:function(t){e.getphoto()},fail:function(t){}})},chooseImg:function(){0!=this.isAllowModify?a.default.miniProgram.redirectTo({url:"../picture/image?color="+this.xzys}):uni.showModal({title:"提示",content:"正在核验，不能修改信息",onfirmText:"确认",showCancel:!1,success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}})},onSave:function(){if(0!=this.isAllowModify){var t=this;uni.showModal({title:"提示",content:"提交之后不能进行修改，请您确认信息是否正确？",success:function(e){e.confirm?(console.log("用户点击确定"),t.subPhoto()):e.cancel&&console.log("用户点击取消")}})}else uni.showModal({title:"提示",content:"正在核验，不能修改信息",onfirmText:"确认",showCancel:!1,success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}})},subPhoto:function(){var t=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/stepSubmit"),method:"POST",header:{"x-access-token":t,"content-type":"application/x-www-form-urlencoded"},data:{code:"2"},success:function(t){console.log(t.data),"200"==t.data.code?uni.showModal({title:"提示",content:t.data.msg,success:function(t){t.confirm?uni.navigateTo({url:"/pages/main/index"}):t.cancel&&console.log("用户点击取消")}}):uni.showToast({title:""+t.data.msg,duration:2e3,icon:"none"})},fail:function(t){uni.showToast({title:"验证异常",duration:2e3,icon:"none"})}})},onGirl:function(){this.$u.route({url:"/pages/user/girlTips"})},onMan:function(){this.$u.route({url:"/pages/user/manTips"})},onTips:function(){this.$u.route({url:"/pages/user/tips"})},returnHome:function(){this.$u.route({url:"/pages/main/index"})}}};e.default=s},"5b4e":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o}));var o={uSwiper:i("1153").default},n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"content"},[t.photo&&1!=t.current?o("v-uni-view",{staticStyle:{display:"flex","margin-top":"30rpx","margin-left":"10rpx","margin-right":"10rpx"}},[o("v-uni-view",{},[o("v-uni-view",{staticStyle:{margin:"auto","line-height":"40rpx","letter-spacing":"2rpx",color:"#2979FF"}},[t._v("温馨提示：请站在白色（纯色）背景，离镜头一米，穿与背景不同颜色衣服，正对镜头，双耳、额头露出，勿佩戴眼镜及首饰，注意光线均匀，不建议自拍。")]),o("v-uni-view",{staticStyle:{float:"right"}},[o("v-uni-view",{staticStyle:{display:"flex"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bz.apply(void 0,arguments)}}},[o("v-uni-view",{staticStyle:{"margin-top":"10rpx"}},[t._v("帮助")]),o("v-uni-image",{staticStyle:{width:"40rpx",height:"40rpx"},attrs:{src:i("b196"),mode:""}})],1)],1)],1)],1):t._e(),t.photo||1==t.current?o("v-uni-view",{staticClass:"images"},[o("v-uni-view",{staticClass:"box1"}),o("v-uni-view",{staticClass:"box2"}),o("v-uni-view",{staticClass:"top"}),o("v-uni-view",{staticClass:"left"}),o("v-uni-view",{staticClass:"rigth"}),o("v-uni-view",{staticClass:"botoom"}),o("v-uni-image",{staticClass:"img",attrs:{src:""+t.photo,mode:"aspectFill"}})],1):t._e(),t.photo&&1!=t.current?o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1==t.isOpenPassportPhoto,expression:"isOpenPassportPhoto==1"}],staticClass:"xzys",staticStyle:{"margin-top":"80upx"}},[o("v-uni-view",{},[t._v("支持背景")]),o("v-uni-view",{staticClass:"bjslist"},[o("v-uni-view",{staticStyle:{color:"#2979FF"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ckyt.apply(void 0,arguments)}}},[t._v("查看原图")]),o("v-uni-view",{class:t.color==t.xzys?"select":""},[o("v-uni-view",{staticClass:"bjs",style:{backgroundColor:t.color},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.BackgroundColor(t.color)}}})],1),o("v-uni-view",{class:t.color1==t.xzys?"select":""},[o("v-uni-view",{staticClass:"bjs",style:{backgroundColor:t.color1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.BackgroundColor(t.color1)}}})],1),o("v-uni-view",{class:t.colors==t.xzys?"select":""},[o("v-uni-view",{staticClass:"bjs",style:{backgroundColor:t.colors},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.BackgroundColor(t.colors)}}})],1)],1)],1):t._e(),t.photo?o("v-uni-view",{staticClass:"tpsc"},[1==t.isAllowModify?o("v-uni-view",{staticClass:"xe",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImg.apply(void 0,arguments)}}},[t._v("重新拍摄")]):t._e(),1==t.isAllowModify?o("v-uni-view",{staticClass:"pz",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSave.apply(void 0,arguments)}}},[t._v("提交核验")]):t._e()],1):t._e(),1==t.current?o("v-uni-view",{staticClass:"btns",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stop.apply(void 0,arguments)}}},[t._v("关闭")]):t._e(),t.photo&&1!=t.current?o("v-uni-view",{staticClass:"btnReturn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.returnHome.apply(void 0,arguments)}}},[t._v("返回首页")]):t._e(),""===t.photo&&1!=t.current?[o("v-uni-view",{staticClass:"swiper"},[o("u-swiper",{attrs:{list:t.list,height:"360"}})],1),o("v-uni-view",{staticClass:"tab-list"},[o("v-uni-view",{staticClass:"tab1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onGirl.apply(void 0,arguments)}}},[o("v-uni-image",{staticClass:"bg",attrs:{mode:"aspectFill",src:i("1c58")}}),o("v-uni-view",{staticStyle:{color:"rgba(51, 51, 51, 0.5)","margin-top":"20rpx"}},[t._v("女生注意事项")])],1),o("v-uni-view",{staticClass:"tab1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onMan.apply(void 0,arguments)}}},[o("v-uni-image",{staticClass:"bg",attrs:{mode:"aspectFill",src:i("4931")}}),o("v-uni-view",{staticStyle:{color:"rgba(51, 51, 51, 0.5)","margin-top":"20rpx"}},[t._v("男生注意事项")])],1),o("v-uni-view",{staticClass:"tab1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onTips.apply(void 0,arguments)}}},[o("v-uni-image",{staticClass:"bg",attrs:{mode:"aspectFill",src:i("4ba1")}}),o("v-uni-view",{staticStyle:{color:"rgba(51, 51, 51, 0.5)","margin-top":"20rpx"}},[t._v("查看拍照技巧")])],1)],1),o("v-uni-view",{staticStyle:{height:"30upx"}}),o("v-uni-view",{staticClass:"tpscbtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImg.apply(void 0,arguments)}}},[t._v("直接拍摄")]),o("v-uni-view",{staticClass:"btnReturn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.returnHome.apply(void 0,arguments)}}},[t._v("返回首页")])]:t._e()],2)},a=[]},"7b59":function(t,e,i){"use strict";i.r(e);var o=i("2712"),n=i.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},"9f5c":function(t,e,i){"use strict";var o=i("bb2c"),n=i.n(o);n.a},a3c9:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".content[data-v-04dcdd63]{width:%?750?%;padding-bottom:%?50?%;overflow:hidden}.content .swiper[data-v-04dcdd63]{width:%?686?%;margin:%?30?% auto}.content .tab-list[data-v-04dcdd63]{width:%?686?%;height:%?260?%;margin:%?40?% auto;display:-webkit-box;display:-webkit-flex;display:flex}.content .tab-list .tab1[data-v-04dcdd63]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:%?233?%;height:%?260?%;text-align:center}.content .tab-list .tab1 .bg[data-v-04dcdd63]{width:%?213?%;height:%?210?%}.content .images[data-v-04dcdd63]{width:%?540?%;margin:%?50?% auto}.content .images .img[data-v-04dcdd63]{opacity:1!important;max-width:%?526?%;min-height:%?736?%;border:%?8?% solid #96a1ff;position:relative;top:%?39?%;z-index:99;background:#fff}.btn[data-v-04dcdd63]{padding:%?8?% 0;position:relative;width:%?686?%;height:%?96?%;left:%?32?%;bottom:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#2979ff;color:#fff;font-size:%?32?%;border-radius:%?16?%;margin-top:%?90?%}.tpsc[data-v-04dcdd63]{width:%?726?%;margin-bottom:%?50?%;margin-left:%?8?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;top:%?20?%}.tpsc .xe[data-v-04dcdd63]{width:%?257?%;height:%?96?%;background:#e9ecff;border-radius:%?16?%;font-weight:500;font-size:%?36?%;line-height:%?96?%;color:#2979ff;text-align:center}.tpsc .pz[data-v-04dcdd63]{width:%?397?%;height:%?96?%;background:#2979ff;border-radius:%?16?%;font-weight:500;font-size:%?36?%;line-height:%?96?%;text-align:center;color:#fff;margin-left:%?30?%}.tpsc .pzbtn[data-v-04dcdd63]{height:%?96?%;background:#2979ff;border-radius:%?16?%;font-weight:500;font-size:%?36?%;line-height:%?96?%;text-align:center;color:#fff}.tpscbtn[data-v-04dcdd63]{padding:%?8?% 0;width:%?686?%;height:%?96?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#2979ff;color:#fff;font-size:%?32?%;border-radius:%?16?%;margin:%?40?% auto}.btns[data-v-04dcdd63]{padding:%?8?% 0;position:absolute;width:%?686?%;height:%?96?%;left:%?32?%;bottom:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff;color:#2979ff;font-size:%?32?%;border-radius:%?16?%;border:1px solid #ccc}.box1[data-v-04dcdd63]{width:%?700?%;height:%?469?%;background:-webkit-linear-gradient(right,rgba(215,220,255,.5),rgba(36,60,255,.1));background:linear-gradient(270deg,rgba(215,220,255,.5),rgba(36,60,255,.1));border-radius:%?16?%;position:absolute;left:%?25?%;top:%?383?%}.box2[data-v-04dcdd63]{width:%?618?%;height:%?585?%;position:absolute;left:%?66?%;top:%?325?%;background:-webkit-linear-gradient(right,rgba(215,220,255,.5) 80%,rgba(36,60,255,.1));background:linear-gradient(270deg,rgba(215,220,255,.5) 80%,rgba(36,60,255,.1));border-radius:%?16?%}.top[data-v-04dcdd63]{position:absolute;left:%?103?%;top:%?273?%;width:%?48?%;height:%?48?%;display:inline-block;border-top:%?14?% solid;border-right:%?14?% solid;border-color:#576aff;-webkit-transform:rotate(-90deg);transform:rotate(-90deg);border-radius:%?7?%;z-index:999}.left[data-v-04dcdd63]{position:absolute;left:%?104?%;top:%?980?%;width:%?48?%;height:%?48?%;display:inline-block;border-top:%?14?% solid;border-right:%?14?% solid;border-color:#576aff;-webkit-transform:rotate(180deg);transform:rotate(180deg);border-radius:%?7?%;z-index:999}.rigth[data-v-04dcdd63]{position:absolute;left:%?600?%;top:%?273?%;width:%?48?%;height:%?48?%;display:inline-block;border-top:%?14?% solid;border-right:%?14?% solid;border-color:#576aff;-webkit-transform:rotate(1turn);transform:rotate(1turn);border-radius:%?7?%;z-index:999}.botoom[data-v-04dcdd63]{position:absolute;left:%?600?%;top:%?980?%;width:%?48?%;height:%?48?%;display:inline-block;border-top:%?14?% solid;border-right:%?14?% solid;border-color:#576aff;-webkit-transform:rotate(90deg);transform:rotate(90deg);border-radius:%?7?%;z-index:999}.btnReturn[data-v-04dcdd63]{margin-top:%?20?%;padding:%?8?% 0;position:relative;width:%?686?%;height:%?96?%;left:%?32?%;top:%?10?%;bottom:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff;color:#2979ff;font-size:%?32?%;border:1px solid #ccc;border-radius:%?16?%}.xzys[data-v-04dcdd63]{width:%?670?%;height:%?60?%;margin:auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.xzys .bjslist[data-v-04dcdd63]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:%?300?%}.xzys .bjslist .bjs[data-v-04dcdd63]{width:%?30?%;height:%?30?%;border-radius:50%;margin:%?5?% auto;border:1px solid #c8c7cc}.select[data-v-04dcdd63]{width:%?40?%;height:%?40?%;border-radius:50%;border:%?2?% solid red;text-align:center}",""]),t.exports=e},b196:function(t,e,i){t.exports=i.p+"static/img/wh.0fcb4779.png"},bb2c:function(t,e,i){var o=i("a3c9");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("4ca696a4",o,!0,{sourceMap:!1,shadowMode:!1})},f3e2:function(t,e,i){"use strict";i.r(e);var o=i("5b4e"),n=i("7b59");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("9f5c");var r,c=i("f0c5"),s=Object(c["a"])(n["default"],o["b"],o["c"],!1,null,"04dcdd63",null,!1,o["a"],r);e["default"]=s.exports}}]);