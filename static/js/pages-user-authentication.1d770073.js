(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-authentication"],{"0daa":function(t,e,o){"use strict";var a=o("6b30"),i=o.n(a);i.a},"1ae3":function(t,e,o){"use strict";var a=o("1e02"),i=o.n(a);i.a},"1e02":function(t,e,o){var a=o("c35d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=o("4f06").default;i("130c01bf",a,!0,{sourceMap:!1,shadowMode:!1})},"1f4f":function(t,e,o){"use strict";o.r(e);var a=o("48c8"),i=o("a697");for(var n in i)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(n);o("1ae3");var s,c=o("f0c5"),l=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"4a039d36",null,!1,a["a"],s);e["default"]=l.exports},"3ea0":function(t,e,o){"use strict";o("d3b7"),o("3ca3"),o("10d1"),o("ddb0"),o("e439");var a=o("4ea4"),i=o("7037");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("ac1f"),o("5319"),o("96cf");var n=a(o("1da1")),s=a(o("ade3")),c=a(o("72d2")),l=(d(o("2371")),a(o("19f9")));function r(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(r=function(t){return t?o:e})(t)}function d(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!==typeof t)return{default:t};var o=r(e);if(o&&o.has(t))return o.get(t);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var c=n?Object.getOwnPropertyDescriptor(t,s):null;c&&(c.get||c.set)?Object.defineProperty(a,s,c):a[s]=t[s]}return a.default=t,o&&o.set(t,a),a}var u={components:{Picker:c.default,txl:l.default},data:function(){var t;return t={category:[],level:[],schoolname:[],disabled:!1,disableds:!1,scrollTop:"",current:""},(0,s.default)(t,"scrollTop",0),(0,s.default)(t,"indexList",["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),(0,s.default)(t,"form",{school:"",schoolname:"",category:"",categoryName:"",level:"",levelName:"",userName:"",phone:""}),(0,s.default)(t,"show",!1),(0,s.default)(t,"banner",""),(0,s.default)(t,"schoolisshow",!0),(0,s.default)(t,"swiperItem",[{title:""},{title:""}]),(0,s.default)(t,"tztitle",""),(0,s.default)(t,"schoolCode",""),(0,s.default)(t,"tgzt",""),(0,s.default)(t,"current",""),(0,s.default)(t,"code",""),(0,s.default)(t,"sfzcurrent",""),(0,s.default)(t,"sfzcode",""),(0,s.default)(t,"isAllowModify",""),(0,s.default)(t,"tips",{title:"",description:"请使用学校统一身份认证系统的登录名和密码登录。"}),t},created:function(){this.GetSteps()},onLoad:function(t){if(void 0!=t.tgzt&&(this.tgzt=t.tgzt),void 0!=t.current&&(this.current=t.current),void 0!=t.code&&(this.code=t.code),void 0!=t.schoolCode&&(console.log("onLoad:",t.schoolCode),this.schoolCode=t.schoolCode),void 0!=t.token&&""!=t.token&&uni.setStorageSync("token",t.token),void 0!=t.schoolCode&&""!=t.schoolCode){uni.setStorageSync("schoolCode",t.schoolCode);var e=uni.getStorageSync("schoolCode");this.schoolinfo(e)}this.isAllowModify=t.isAllowModify,console.log(this.isAllowModify),this.grinfo()},methods:{GetSteps:function(){},tzcontent:function(t,e){uni.showModal({title:t,content:e,onfirmText:"确认",showCancel:!1,success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}})},evFunc:function(t){this.form.school=t.code,this.form.schoolname=t.name,this.show=!1,this.form.category="",this.form.categoryName="",this.form.level="",this.form.levelName="",t.code},grinfo:function(){var t=this;uni.request({url:"".concat(getApp().globalData.url,"/api/getUserInfo"),method:"POST",header:{"x-access-token":uni.getStorageSync("token")},success:function(e){if(void 0!=t.schoolCode&&""!=t.schoolCode||(t.schoolCode=e.data.data.schoolCode,console.log(t.schoolCode),t.schoolinfo(t.schoolCode),uni.setStorageSync("schoolCode",t.schoolCode)),void 0==e.data.data||void 0==e.data.data.school||""==e.data.data.school){var o=uni.getStorageSync("schoolCode");void 0!=o&&""!=o&&t.getSchoolInit(o)}void 0!=e.data.data&&void 0!=e.data.data.school&&(t.form.school=e.data.data.schoolCode,t.form.schoolname=e.data.data.school,t.form.category=e.data.data.category,t.form.categoryName=e.data.data.categoryName,t.form.level=e.data.data.level,t.form.levelName=e.data.data.levelName,t.form.phone=e.data.data.cardNum,t.form.userName=e.data.data.xm)},fail:function(t){}})},schoolinfo:function(t){var e=this;return(0,n.default)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,uni.request({url:"".concat(getApp().globalData.url,"/api/getschoolInfo"),method:"POST",header:{"x-access-token":uni.getStorageSync("token"),"content-type":"application/x-www-form-urlencoded"},data:{schoolCode:t},success:function(t){if(console.log(t.data),t.data.banner?(e.banner=getApp().globalData.url+t.data.banner,console.log(e.banner)):e.banner="../../static/user_top.png",void 0!=t.data.notice&&1==t.data.notice.length){var o=t.data.notice[0].title,a=t.data.notice[0].context;console.log(o);for(var i=0;i<e.swiperItem.length;i++)e.swiperItem[i].title=o,e.swiperItem[i].context=a}else e.swiperItem=t.data.notice;console.log(e.swiperItem)}});case 2:case"end":return o.stop()}}),o)})))()},getSchool:function(){var t=this,e=uni.getStorageSync("token"),o="";""==this.form.school&&""!=this.form.schoolname&&(o=this.form.schoolname.replace(/\s+/g,"")),uni.request({url:"".concat(getApp().globalData.url,"/api/getSchool"),method:"POST",header:{"x-access-token":e,"content-type":"application/x-www-form-urlencoded"},data:{schoolName:o,schoolId:""},success:function(e){console.log(e.data.data),t.schoolname=e.data.data},fail:function(t){}})},getSchoolInit:function(t){var e=this,o=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/getSchool"),method:"POST",header:{"x-access-token":o,"content-type":"application/x-www-form-urlencoded"},data:{schoolName:"",schoolId:""},success:function(o){for(var a=0;a<o.data.data.length;a++)if(o.data.data[a].code==t){e.form.school=o.data.data[a].code,e.form.schoolname=o.data.data[a].name;break}},fail:function(t){}})},stop:function(){uni.navigateBack({delta:1})},School:function(){this.getSchool(),this.show=!0},GetSchool:function(t,e,o){this.form.school=e,this.form.schoolname=t},onSave:function(){var t=this;if(2!=this.tgzt&&1!=this.current&&2!=this.current)if(console.log(this.form.schoolname),void 0!=this.form.schoolname&&null!=this.form.schoolname&&""!=this.form.schoolname)if(void 0!=this.form.account&&null!=this.form.account&&""!=this.form.account)if(void 0!=this.form.password&&null!=this.form.password&&""!=this.form.password){var e=uni.getStorageSync("token");uni.request({url:"".concat(getApp().globalData.url,"/api/unifiedAuthentication"),method:"POST",header:{"x-access-token":e,"content-type":"application/x-www-form-urlencoded"},data:{schoolCode:this.form.school,account:this.form.account,password:this.form.password},success:function(e){if(console.log(e.data),"200"==e.data.code){var o=t;uni.showModal({title:"提示",content:e.data.msg,success:function(t){t.confirm?(setTimeout((function(){uni.navigateTo({url:"/pages/user/card?sfzcurrent="+o.sfzcurrent+"&sfzcode="+o.sfzcode})}),1e3),console.log(1)):t.cancel&&console.log("用户点击取消")}})}else uni.showToast({title:""+e.data.msg,duration:2e3,icon:"none"})},fail:function(t){uni.showToast({title:"验证异常",duration:2e3,icon:"none"})}})}else uni.showToast({title:"密码不能为空",icon:"none"});else uni.showToast({title:"登录名不能为空",icon:"none"});else uni.showToast({title:"学校不能为空",icon:"none"});else uni.showModal({title:"提示",content:"正在核验，不能修改信息",confirmText:"确认",showCancel:!1,success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}})}}};e.default=u},"48c8":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return a}));var a={uIcon:o("f86b").default},i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.show?o("v-uni-view",{staticClass:"u-alert-tips",class:[t.show?"":"u-close-alert-tips",t.type?"u-alert-tips--bg--"+t.type+"-light":"",t.type?"u-alert-tips--border--"+t.type+"-disabled":""],style:{backgroundColor:t.bgColor,borderColor:t.borderColor}},[o("v-uni-view",{staticClass:"u-icon-wrap"},[t.showIcon?o("u-icon",{staticClass:"u-icon",attrs:{name:t.uIcon,size:t.description?40:32,color:t.uIconType,"custom-style":t.iconStyle}}):t._e()],1),o("v-uni-view",{staticClass:"u-alert-content",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.click.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"u-alert-title",style:[t.uTitleStyle]},[t._v(t._s(t.title))]),t.description?o("v-uni-view",{staticClass:"u-alert-desc",style:[t.descStyle]},[t._v(t._s(t.description))]):t._e()],1),o("v-uni-view",{staticClass:"u-icon-wrap"},[t.closeAble&&!t.closeText?o("u-icon",{staticClass:"u-close-icon",style:{top:t.description?"18rpx":"24rpx"},attrs:{hoverClass:"u-type-error-hover-color",name:"close",color:"#c0c4cc",size:22},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}):t._e()],1),t.closeAble&&t.closeText?o("v-uni-text",{staticClass:"u-close-text",style:{top:t.description?"18rpx":"24rpx"}},[t._v(t._s(t.closeText))]):t._e()],1):t._e()},n=[]},"6b30":function(t,e,o){var a=o("ec77");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=o("4f06").default;i("0ea53d38",a,!0,{sourceMap:!1,shadowMode:!1})},7209:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("a4d3"),o("e01a"),o("b64b");var a={name:"u-alert-tips",props:{title:{type:String,default:""},type:{type:String,default:"warning"},description:{type:String,default:""},closeAble:{type:Boolean,default:!1},closeText:{type:String,default:""},showIcon:{type:Boolean,default:!1},color:{type:String,default:""},bgColor:{type:String,default:""},borderColor:{type:String,default:""},show:{type:Boolean,default:!0},icon:{type:String,default:""},iconStyle:{type:Object,default:function(){return{}}},titleStyle:{type:Object,default:function(){return{}}},descStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{uTitleStyle:function(){var t={};return t.fontWeight=this.description?500:"normal",this.$u.deepMerge(t,this.titleStyle)},uIcon:function(){return this.icon?this.icon:this.$u.type2icon(this.type)},uIconType:function(){return Object.keys(this.iconStyle).length?"":this.type}},methods:{click:function(){this.$emit("click")},close:function(){this.$emit("close")}}};e.default=a},9156:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return a}));var a={uAlertTips:o("1f4f").default,uPopup:o("df25").default},i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"content"},[o("v-uni-view",{staticClass:"bjt"},[o("v-uni-image",{attrs:{src:t.banner,mode:""}})],1),t.schoolisshow?t._e():o("v-uni-view",{staticClass:"swiper"},[o("v-uni-view",{staticStyle:{"margin-left":"20rpx",width:"100%",height:"50rpx",overflow:"hidden"}},[o("v-uni-swiper",{attrs:{circular:!0,vertical:!1,autoplay:!0,interval:4e3,duration:6e3}},t._l(t.swiperItem,(function(e,a){return o("v-uni-swiper-item",{key:a,staticStyle:{height:"1rpx"},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.tzcontent(e.title,e.context)}}},[o("v-uni-view",{staticClass:"swiper_item"},[t._v(t._s(e.context))])],1)})),1)],1)],1),o("v-uni-view",[o("u-alert-tips",{staticClass:"alert-tips",staticStyle:{"margin-bottom":"20upx"},attrs:{type:"primary",title:t.tips.title,description:t.tips.description}})],1),o("v-uni-view",{staticClass:"article"},[o("v-uni-view",{staticClass:"form-item"},[o("v-uni-view",{staticClass:"title flex"},[t._v("学校"),o("v-uni-view",{staticClass:"tips"},[t._v("*")])],1),o("v-uni-view",{staticClass:"input flex space-between"},[o("v-uni-input",{attrs:{placeholder:"请输入学校","placeholder-class":"placeholder-input",disabled:!0},model:{value:t.form.schoolname,callback:function(e){t.$set(t.form,"schoolname",e)},expression:"form.schoolname"}})],1)],1),o("v-uni-view",{staticClass:"form-item"},[o("v-uni-view",{staticClass:"title flex"},[t._v("登录名"),o("v-uni-view",{staticClass:"tips"},[t._v("*")])],1),o("v-uni-view",{staticClass:"input flex space-between"},[o("v-uni-input",{staticStyle:{width:"600upx"},attrs:{placeholder:"请输入学号/工号",disabled:t.disabled,"placeholder-class":"placeholder-input"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1)],1),o("v-uni-view",{staticClass:"form-item"},[o("v-uni-view",{staticClass:"title flex"},[t._v("密码"),o("v-uni-view",{staticClass:"tips"},[t._v("*")])],1),o("v-uni-view",{staticClass:"input flex space-between"},[o("v-uni-input",{staticStyle:{width:"600upx"},attrs:{placeholder:"请输入密码",password:!0,maxlength:"50",disabled:t.disableds,"placeholder-class":"placeholder-input"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1),0==t.isAllowModify?o("v-uni-view",{staticClass:"btns",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.stop.apply(void 0,arguments)}}},[t._v("返回首页")]):o("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSave.apply(void 0,arguments)}}},[t._v("下一步")]),o("u-popup",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("txl",{attrs:{datas:t.schoolname,index:!0,name:"name"},on:{ev:function(e){arguments[0]=e=t.$handleEvent(e),t.evFunc.apply(void 0,arguments)}}})],1)],1)},n=[]},a32a:function(t,e,o){"use strict";o.r(e);var a=o("3ea0"),i=o.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},a697:function(t,e,o){"use strict";o.r(e);var a=o("7209"),i=o.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},b885:function(t,e,o){"use strict";o.r(e);var a=o("9156"),i=o("a32a");for(var n in i)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(n);o("0daa");var s,c=o("f0c5"),l=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"0722a80f",null,!1,a["a"],s);e["default"]=l.exports},c35d:function(t,e,o){var a=o("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.u-alert-tips[data-v-4a039d36]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?16?% %?30?%;border-radius:%?8?%;position:relative;-webkit-transition:all .3s linear;transition:all .3s linear;border:1px solid #fff}.u-alert-tips--bg--primary-light[data-v-4a039d36]{background-color:#ecf5ff}.u-alert-tips--bg--info-light[data-v-4a039d36]{background-color:#f4f4f5}.u-alert-tips--bg--success-light[data-v-4a039d36]{background-color:#dbf1e1}.u-alert-tips--bg--warning-light[data-v-4a039d36]{background-color:#fdf6ec}.u-alert-tips--bg--error-light[data-v-4a039d36]{background-color:#fef0f0}.u-alert-tips--border--primary-disabled[data-v-4a039d36]{border-color:#a0cfff}.u-alert-tips--border--success-disabled[data-v-4a039d36]{border-color:#71d5a1}.u-alert-tips--border--error-disabled[data-v-4a039d36]{border-color:#fab6b6}.u-alert-tips--border--warning-disabled[data-v-4a039d36]{border-color:#fcbd71}.u-alert-tips--border--info-disabled[data-v-4a039d36]{border-color:#c8c9cc}.u-close-alert-tips[data-v-4a039d36]{opacity:0;visibility:hidden}.u-icon[data-v-4a039d36]{margin-right:%?16?%}.u-alert-title[data-v-4a039d36]{font-size:%?28?%;color:#303133}.u-alert-desc[data-v-4a039d36]{font-size:%?26?%;text-align:left;color:#606266}.u-close-icon[data-v-4a039d36]{position:absolute;top:%?20?%;right:%?20?%}.u-close-hover[data-v-4a039d36]{color:red}.u-close-text[data-v-4a039d36]{font-size:%?24?%;color:#909399;position:absolute;top:%?20?%;right:%?20?%;line-height:1}',""]),t.exports=e},ec77:function(t,e,o){var a=o("24fb");e=a(!1),e.push([t.i,".swiper[data-v-0722a80f]{display:-webkit-box;display:-webkit-flex;display:flex;color:#2979ff}.bjt[data-v-0722a80f]{width:%?750?%;height:%?256?%;margin-bottom:%?30?%}.bjt uni-image[data-v-0722a80f]{width:100%;height:100%}.content[data-v-0722a80f]{width:%?750?%;padding-top:%?0?%;margin:0 auto}.content .alert-tips[data-v-0722a80f]{width:%?686?%;height:%?90?%;padding:%?25?%;margin:auto}.content .form-item[data-v-0722a80f]{width:%?686?%;height:%?90?%;box-sizing:border-box;border-bottom:1px solid rgba(0,0,0,.1);height:%?140?%;padding:%?25?%;margin:auto}.content .form-item .title[data-v-0722a80f]{display:-webkit-box;display:-webkit-flex;display:flex;color:#333;font-size:%?28?%;margin-bottom:%?16?%}.content .form-item .title .tips[data-v-0722a80f]{color:red;margin-left:%?6?%}.content .form-item .input[data-v-0722a80f]{height:%?50?%;font-size:%?32?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .form-item .select[data-v-0722a80f]{color:#2979ff}.content .form-item .placeholder-input[data-v-0722a80f]{color:rgba(51,51,51,.25)}.content .btn[data-v-0722a80f]{padding:%?8?% 0;width:%?686?%;height:%?96?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#2979ff;color:#fff;font-size:%?32?%;border-radius:%?16?%;margin:%?40?% auto}.content .btns[data-v-0722a80f]{padding:%?8?% 0;width:%?686?%;height:%?96?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff;color:#2979ff;font-size:%?32?%;border-radius:%?16?%;border:1px solid #ccc;margin:%?40?% auto}",""]),t.exports=e}}]);